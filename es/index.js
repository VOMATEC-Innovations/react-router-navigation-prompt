(()=>{"use strict";var t={689:t=>{t.exports=require("react")},661:t=>{t.exports=require("react-router-dom")}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}var n={};(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0});var e,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=(e=o(689))&&e.__esModule?e:{default:e},a=o(661),c={action:null,isActive:!1,nextLocation:null},p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o._prevUserAction="",o._isMounted=!0,o.block=o.block.bind(o),o.onBeforeUnload=o.onBeforeUnload.bind(o),o.onCancel=o.onCancel.bind(o),o.onConfirm=o.onConfirm.bind(o),o.onSkip=o.onSkip.bind(o),o.when=o.when.bind(o),o.state=i({},c,{unblock:function(){}}),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){this.props.disableNative||window.addEventListener("beforeunload",this.onBeforeUnload),this.setState({unblock:this.props.history.block(this.block)})}},{key:"componentDidUpdate",value:function(t,e){"CANCEL"===this._prevUserAction&&"function"==typeof this.props.afterCancel?this.props.afterCancel():"CONFIRM"===this._prevUserAction&&"function"==typeof this.props.afterConfirm?this.props.afterConfirm():"SKIP"===this._prevUserAction&&"function"==typeof this.props.afterSkip&&this.props.afterSkip(),this._prevUserAction=""}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,"CONFIRM"===this._prevUserAction&&"function"==typeof this.props.afterConfirm&&(this._prevUserAction="",this.props.afterConfirm()),this.state.unblock(),this.props.disableNative||window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"block",value:function(t,e){var o=this,n=this.when(t,e);return n&&this.setState({action:e,nextLocation:t,isActive:!0},(function(){return o.props.onShow&&o.props.onShow({action:o.state.action,nextLocation:o.state.nextLocation,onConfirm:o.onConfirm,onCancel:o.onCancel,onSkip:o.onSkip})})),!n}},{key:"navigateToNextLocation",value:function(){var t=this,e=this.state,o=e.action,n=e.nextLocation;o={POP:this.props.allowGoBack?"goBack":"push",PUSH:"push",REPLACE:"replace"}[o||"PUSH"],n||(n={pathname:"/"});var r=this.props.history;if(this.state.unblock(),this._prevUserAction="CONFIRM","goBack"===o){var s=r.listen((function(){s(),t._isMounted&&t.setState(i({},c,{unblock:r.block(t.block)}))}));r.goBack()}else r[o](n),this._isMounted&&this.setState(i({},c,{unblock:this.props.history.block(this.block)}))}},{key:"navigateTo",value:function(t,e){var o={POP:"",PUSH:"push",REPLACE:"replace"}[e||"PUSH"];if(!o)throw new Error("Action is not supported!");var n=this.props.history;this.state.unblock(),this._prevUserAction="SKIP",n[o](t),this._isMounted&&this.setState(i({},c,{unblock:this.props.history.block(this.block)}))}},{key:"navigateToNative",value:function(t,e){if(this.props.disableNative||window.removeEventListener("beforeunload",this.onBeforeUnload),"PUSH"===e)window.location.assign(t);else{if("REPLACE"!==e)throw new Error("Action is not supported!");window.location.replace(t)}}},{key:"onSkip",value:function(t,e){var o=this;(this.props.beforeSkip||function(t){t()})((function(){t instanceof URL?o.navigateToNative(t.toString(),e):"string"==typeof t&&/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(t)?o.navigateToNative(t,e):o.navigateTo(t,e)}))}},{key:"onCancel",value:function(){var t=this;(this.props.beforeCancel||function(t){t()})((function(){t._prevUserAction="CANCEL",t.setState(i({},c))}))}},{key:"onConfirm",value:function(){var t=this;(this.props.beforeConfirm||function(t){t()})((function(){t.navigateToNextLocation()}))}},{key:"onBeforeUnload",value:function(t){if(this.when()){this.props.onShowNative&&this.props.onShowNative();var e="Do you want to leave this site?\n\nChanges you made may not be saved.";return t.returnValue=e,e}}},{key:"when",value:function(t,e){return"function"==typeof this.props.when?this.props.when(this.props.location,t,e):this.props.when}},{key:"render",value:function(){return this.state.isActive||this.props.renderIfNotActive?s.default.createElement("div",null,this.props.children({isActive:this.state.isActive,action:this.state.action,nextLocation:this.state.nextLocation,onConfirm:this.onConfirm,onCancel:this.onCancel,onSkip:this.onSkip})):null}}]),e}(s.default.Component);t.default=(0,a.withRouter)(p)})(),module.exports=n})();